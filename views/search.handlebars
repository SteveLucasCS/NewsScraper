<main class="container bg-dark">
  <div class="row">
    <h2 class="text-white mx-auto my-3">News Articles</h2>
  </div>

  {{#each data}}
  <div class="card mb-4">
    <div class="row justify-content-left" style="margin: 0 !important;">
      {{#if this.image}}
      <div class="col-5 col-sm-5 col-lg-3 pl-0">
        <img src="{{this.image}}" style="height: inherit !important; max-width: 100%;" alt="">
      </div>
      <div class="card-body col-6 col-sm-6 col-lg-8">
        <a href="{{this.link}}" target="_blank"><h5 class="card-title">{{this.title}}</h5></a>
        <p class="card-text">{{this.summary}}</p>
        <a href="{{this.link}}" target="_blank">View Article...</a>
      </div>
      {{else}}
      <div class="card-body col-11">
        <a href="{{this.link}}" target="_blank"><h5 class="card-title">{{this.title}}</h5></a>
        <p class="card-text">{{this.summary}}</p>
        <a href="{{this.link}}" target="_blank">View Article...</a>
      </div>
      {{/if}}
    </div> <!-- end row -->

    <div class="card-footer justify-content-center">

      <div class="accordion border-0" id="thread{{@index}}">
        <div class="card border-0">
          <div class="card-header px-0 pt-0" id="heading{{@index}}">
            <h2 class="mb-0 text-center">
              <button class="btn btn-outline-primary showComments mx-auto" type="button" data-index="{{@index}}" data-articleid="{{this._id}}" data-toggle="collapse" data-target="#collapse{{@index}}"
                aria-expanded="true" aria-controls="collapse{{@index}}">
                Show Comments
              </button>
            </h2>
          </div>

          <div id="collapse{{@index}}" class="collapse" aria-labelledby="headingOne" data-parent="#thread{{@index}}">
            <div class="card-body py-0 px-4" id="commentContainer{{@index}}">
              <!-- comments will be written here through JS -->
            </div>
          </div>
        </div>
      </div> <!-- end accordian -->

      <div class="dropleft text-right">
        <button class="btn btn-primary dropdown-toggle text-center" type="button" id="commentDropownBtn{{@index}}" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Write Comment
        </button>
        <div class="dropdown-menu bg-secondary text-white" style="width: 60%; margin-left: -22%;" aria-labelledby="commentDropdownBtn{{@index}}">
          <form class="commentForm">
            <div class="form-group ml-4 mr-4 text-center">
              <label for="username{{@index}}">Username</label>
              <input type="text" class="form-control" id="username{{@index}}" placeholder="Username">
              <label for="commentBody{{@index}}" class="mt-3">Comment</label>
              <textarea class="form-control" id="commentBody{{@index}}" rows="3" placeholder="Type your comment here..."></textarea>
              <p class="mb-0"><span id="errorMsg{{@index}}" style="color: #ff6d6d;"></span></p>
              <button class="submitComment btn btn-primary mt-3 mx-auto" type="submit"  style="width: 10em;"data-index="{{@index}}" data-articleid="{{this._id}}">
                Post
              </button>
            </div>
          </form>
        </div>
      </div>

    </div> <!-- end card-footer -->
  </div> <!-- end card -->
  {{else}}
  <h3>Sorry, we couldn't retrieve any articles.</h3>
  {{/each}}
  </div>
</main>